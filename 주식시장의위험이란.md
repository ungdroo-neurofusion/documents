위험이란 원래라면 전적으로 부정적인 의미로 사용됩니다.
그러나 투자에서는 위험의 정의가 다르면서 동시에 범위도 넓어집니다.

투자에서 위험의 정의는 '수익률이 기대했던 것과 다를 가능성'을 가리킵니다.
즉 투자위험은 나쁜 결과뿐 아니라 좋은 결과도 포함 됩니다. 굳이 나누자면 전자는 부정적 위험, 후자는 긍정적 위험으로 부를 수 있습니다.
직관적으로는 이해가 잘 안되죠?

실제로 투자에서의 위험의 뜻을 가장 잘 포착한 용어는 한자어 위기(危機)입니다.
위는 "위태로움", 기는 "기회"를 의미합니다.
즉, 위기는 위태로움과 기회를 동시에 내포하는 것입니다.

구체적인 투자 상품들을 예로 들어보겠습니다.

옵션 투자의 경우를 봅시다.
옵션은 단기간에 100%, 200% 이상의 수익을 거둘 수 있는 기회가 있습니다.
하지만 동시에 투자금의 대부분을 잃을 수 있는 위험도 존재합니다.
즉, 높은 수익의 기회와 큰 손실의 위험이 공존합니다.

반면 은행 예금의 경우는 어떨까요?
연 3~4%의 이자율은 절대 높아지지 않습니다. 인플레이션을 고려하면 실질 수익률은 더 낮을 수 있죠.
하지만 원금이 보장되어 있어 손실 위험이 거의 없습니다.

이처럼 투자 상품마다 위험과 기회의 크기가 다릅니다.
높은 수익의 기회가 있다면 그만큼 큰 손실의 위험도 따르게 되고,
안정성이 보장되어 위험이 낮으으면 높은 수익을 기대하기는 어려운 것입니다.

그래서 우리는 위기를 잘 활용해 위험과 기대수익을 균형있게 조절해야 합니다.

## 주식의 위험에 대한 보편적으로 사용되는 정의

실제 수익과 기대 수익이 같으면 위험이 없다고 볼 수 있습니다.
무위험 자산의 경우 실제 수익과 기대 수익이 같으므로 위험이 없다고 볼 수 있습니다.
무위험 자산의 대표적인 예시는 예금입니다.(물론 사실 위험이 0은 아닙니다. 편의상 0으로 보겠습니다.)

예금금리가 3%라면 1년뒤에 100만원을 예금하면 103만원이 됩니다.
기대를 3%를 했고, 실제도 3%를 얻었습니다.

주식의 경우는 어떨까요?

팔란티어 같은 회사의 주식을 산다고 가정해 보겠습니다.
나는 팔란티어의 1년 뒤 수익률이 30%가 될 것이라 기대합니다.
하지만 1년 뒤에 가보면 이보다 높거나 낮을 것 입니다.

예금과는 다르게 팔란티어는 실제수익과 기대수익이 다릅니다.
실제수익과 기대수익이 다르다는 것은 위험이 존재한다는 것입니다.

이것을 우리는 '분산' 혹은 '표준편차'라는 수치로 표현합니다.

과거 실제수익이 기대수익에서 많이 벗어났던 자산의 분산은 크고 반대로 실제수익이 기대수익에 가까웠던 자산의 분산은 작습니다. 여기서 기대수익을 0으로 바꿔도 분산은 같습니다.

1,2,3 의 평균은 2이고 분산은 0.67입니다.
-1,0,1 의 평균은 0이고 분산은 0.67입니다.

그럼 일단 우리 실제 수익이 0에서 벗어나는 정도가 큰 자산이 위험하다는 정의를 따라봅시다.

물론 기대보다 수익률이 많이 나는 '긍정적' 위험이 왜 위험이냐 라고 생각할 수 있습니다.
이것에 대한 비판은 다른 위험에 대한 대안지표들을 살펴볼때 따져봅시다.
일단은 분산 혹은 표준편차를 위험의 척도로 사용해 봅시다.

## 위험의 종류 : 분산 가능 위험, 분산 불가능 위험

실제수익이 기대수익에서 벗어나는 원인은 뭘까요? 기대수익에 대한 예측이 틀릴 원인 말입니다.
주식을 기준으로 보면 크게 두가지 원인이 있습니다.

하나는 내가 투자한 회사에서 발생한 위험이고
다른 하나는 시장 전반에서 발생한 위험입니다.

회사 특정에서 비롯되는 위험은 그 회사에 특화된 위험으로 다른 회사에는 영향을 미치지 않습니다.
그러나 시장 전반에서 오는 위험은 거의 모든 회사에 영향을 미칩니다.

예를들어 볼까요?

팔란티어 주식을 산다고 가정해 봅시다. 만약 팔란티어 경영진이 고객들의 수요를 잘못 판단하여 수익에 악영향을 끼치게 되었습니다. 이 판단은 팔란티어 주식에만 영향을 미칩니다. 다른 기업에는 영향을 미치지 않습니다.

이번에는 섹터 위험을 생각해 봅시다. 만약 미국 국방예산이 삭감되어 이쪽에 대한 수요가 줄어든다면 팔란티어를 포함해 방위산업에 속한 기업들은 모두 부정적인 영향을 받게 됩니다. 하지만 음식료나 의류섹터 종목들은 영향을 받지 않습니다.

이번에는 조금 더 광범위한 위험을 생각해 봅시다. 금리가 상승하면 정도의 차이가 있을 뿐 모든 기업에 영향을 미치게 됩니다. 경기가 침체하면 거의 대부분의 기업에 부정적인 영향을 미칩니다. 이걸 시장위험이라고 부릅니다.

기업 고유의 위험은 우리가 많은 기업에 투자하여 줄일수 있습니다. 그래서 분산 가능위험이라고 합니다.
시장 위험은 아무리 많음 기업에 투자해도 줄일 수 없습니다. 그래서 분산 불가능 위험이라고 부릅니다.

많은 기업에 투자하면 왜 특정 회사에 대한 위험이 줄어들까요?

1) 일단은 개별 종목의 비중이 작아지기 때문입니다. 너무 당연하죠?
2) 이게 중요한데 특정 회사의 위험이 발생했을 때 포트폴리오에 포함된 종목이 많으면 다른 종목들의 움직임에 상쇄됩니다. 

예를 들어볼까요? 신발회사와 우산회사에 투자했다고 해봅시다. 날씨가 계속 좋아서 우산회사의 주가가 하락했다면, 신발회사는 오히려 실외 운동을 하는 사람들이 늘어나면서 주가가 상승할 수 있습니다. 서로 다른 방향으로 움직이면서 전체적인 손실을 줄여주는 거죠. 수익이 아닌 철저히 위험의 관점에서 보면 그렇다는 말입니다. 아니면 우산회사의 주가는 하락했지만 전혀 관계없는 과자회사가 최근에 수요가 늘어서 주가가 상승하여 우산회사 주가의 하락을 포트폴리오 차원에서 방어할수도 있습니다. 분산을 하면 포트폴리오 내의 서로 다른 회사들이 각자의 이유로 오르고 떨어지면서 한 회사가 미치는 영향이 줄어들게 됩니다.

이걸 수학적으로 증명해보겠습니다.

## 포트폴리오 분산투자의 수학적 증명

1. 직관적 이해부터 시작해봅시다.

- 한 종목에만 투자하면 그 종목의 위험(표준편차)에 그대로 노출됩니다.
- 두 종목 이상에 분산투자하면, 각 종목이 서로 다른 움직임(상관관계)에 따라 포트폴리오 전체 변동폭이 달라집니다. 일단 딱 두 종목만 투자한다고 보겠습니다. 
  - 두 종목이 완벽히 같은 방향(상관계수=1)으로 움직이면 분산투자 효과가 없습니다.
  - 두 종목이 전혀 무관(상관계수=0)하게 움직이면, 전체 변동성이 줄어듭니다.
  - 두 종목이 정반대로(상관계수=-1) 움직이면, 거의 '헷지' 효과가 나서 변동성을 크게 줄일 수 있습니다.

2. 수학적 증명

두 자산 A와 B가 있다고 가정해봅시다.
- A의 기대수익률: $\mu_A$, 분산: $\sigma_A^2$, 표준편차: $\sigma_A$
- B의 기대수익률: $\mu_B$, 분산: $\sigma_B^2$, 표준편차: $\sigma_B$
- 두 자산의 상관계수: $\rho_{AB}$ ($-1 \leq \rho_{AB} \leq 1$)
- A의 투자비중: $w_A$, B의 투자비중: $w_B = 1-w_A$

이때 포트폴리오의 분산은:
$\sigma_P^2 = w_A^2\sigma_A^2 + w_B^2\sigma_B^2 + 2w_Aw_B\rho_{AB}\sigma_A\sigma_B$

이거는 그냥 정해진 수학공식입니다.

3. 예시를 통한 수학적 증명

가정:
- A와 B의 표준편차가 동일: $\sigma_A = \sigma_B = 10\%$
- 50:50 투자: $w_A = w_B = 0.5$
- A와 B의 기대수익률은 같다고 가정합니다.

상관계수별 포트폴리오 위험:

a) $\rho_{AB} = 1$ (완벽한 양의 상관)
   - $\sigma_P = 10\%$ (위험감소 없음)

b) $\rho_{AB} = 0$ (무상관)
   - $\sigma_P \approx 7.07\%$ (위험 약 30% 감소)

c) $\rho_{AB} = -1$ (완벽한 음의 상관)
   - $\sigma_P = 0\%$ (위험 완전 제거)
   
4. 실제 사례를 통한 증명

실제 예시를 통해 상관계수가 -1인 두 자산으로 포트폴리오를 구성하면 위험이 0이 될 수 있음을 보여드리겠습니다.

가상의 5일간 일별 수익률 데이터를 살펴보겠습니다:

| 일자 | 자산 A 수익률(%) | 자산 B 수익률(%) |
|:---:|:-------------:|:-------------:|
| 1일  | 2   | 10  |
| 2일  | 4   | 8   |
| 3일  | 6   | 6   |
| 4일  | 8   | 4   |
| 5일  | 10  | 2   |

두 자산 모두 평균 수익률은 6%로 동일하며, 자산 B의 수익률은 자산 A와 정확히 반대로 움직입니다(상관계수 ρ = -1).

이때 두 자산에 각각 50%씩 투자하면:

| 일자 | 포트폴리오 수익률(%) |
|:---:|:----------------:|
| 1일  | 6 |
| 2일  | 6 |
| 3일  | 6 |
| 4일  | 6 |
| 5일  | 6 |

놀랍게도 매일 6%의 일정한 수익률이 발생합니다. 즉:
- 포트폴리오의 기대수익률 = 6% (개별 자산과 동일)
- 포트폴리오의 표준편차 = 0 (위험 완전 제거)

이는 이론적으로 완벽한 헤지가 가능함을 보여주는 예시입니다. 물론 현실에서 상관계수가 정확히 -1인 자산을 찾기는 거의 불가능하지만, 낮은 상관관계를 가진 자산들로 포트폴리오를 구성하면 위험을 상당히 감소시킬 수 있다는 점을 시사합니다.


5. 결론

- 상관계수가 1보다 작으면 분산투자로 위험을 줄일 수 있습니다.
- 상관계수가 낮을수록 위험감소 효과가 커집니다.
- 현실에서는 완벽한 음의 상관관계(-1)를 찾기 어렵지만, 낮은 상관관계를 가진 자산들에 분산투자하면 전체 포트폴리오의 위험을 상당히 줄일 수 있습니다.

기대수익률은 그대로 두고 말이죠. 이게 핵심입니다. 기대수익률은 그대로 두고 분산투자로 위험만 낮추는게 이론적으로는 가능합니다.

기대수익률은 그대로 두고 위험만 0으로 만들 수 있다면 얼마나 완벽한 포트폴리오가 되겠습니까?
그래서 분산 투자를 유일한 공짜 점심이라고 부르는 이유이기도 합니다.


## 현실에서의 한계

하지만 현실에서는 이론처럼 완벽한 분산투자가 어려운 몇 가지 이유가 있습니다:

1. 상관관계의 불안정성
   - 자산 간 상관관계는 시간에 따라 계속 변합니다.
   - 특히 시장 위기 상황에서는 대부분의 자산이 동반 하락하는 경향이 있어, 상관계수가 1에 가까워집니다.
   - -1인 자산은 없다는 소리죠. 그게 무엇이든 말입니다.

2. 거래비용
   - 이론에서는 거래비용을 고려하지 않지만, 현실에서는 매매수수료, 세금 등이 발생합니다.

3. 시장의 효율성
   - 현실 시장에서는 위험이 낮고 수익률이 높은 자산의 가격은 빠르게 상승하여 기대수익을 낮춥니다.
   - 위험과 수익의 상충관계(trade-off)가 형성되어, 위험만 낮추고 수익은 그대로 유지하기가 어렵습니다.

따라서 현실에서는 이론적인 최적 포트폴리오를 구성하기 어렵지만, 
그래도 적절한 분산투자는 위험관리의 중요한 도구라고 할 수 있습니다.

계속...